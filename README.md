# Screeps AI

ä¸€ä¸ªä½¿ç”¨ TypeScript å¼€å‘çš„ Screeps æ¸¸æˆ AI è„šæœ¬é¡¹ç›®ã€‚

## å…³äº Screeps

[Screeps](https://screeps.com/) æ˜¯ä¸€ä¸ªç¼–ç¨‹ç­–ç•¥æ¸¸æˆï¼Œç©å®¶éœ€è¦ç¼–å†™ JavaScript/TypeScript ä»£ç æ¥æ§åˆ¶æ¸¸æˆä¸­çš„å•ä½ï¼ˆcreepsï¼‰è¿›è¡Œèµ„æºé‡‡é›†ã€å»ºé€ ã€æˆ˜æ–—ç­‰æ“ä½œã€‚è¿™æ˜¯ä¸€ä¸ªæŒç»­è¿è¡Œçš„ MMO æ¸¸æˆï¼Œå³ä½¿ç©å®¶ç¦»çº¿ï¼ŒAI ä»£ç ä¹Ÿä¼šç»§ç»­è¿è¡Œã€‚

## é¡¹ç›®ç‰¹æ€§

- ğŸ¤– **æ™ºèƒ½è§’è‰²ç³»ç»Ÿ** - åŒ…å«é‡‡é›†è€…ã€å»ºé€ è€…ã€å‡çº§è€…ã€æŒ–çŸ¿è€…ã€ç»´ä¿®è€…ç­‰å¤šç§è§’è‰²
- ğŸ—ï¸ **æ¨¡å—åŒ–æ¶æ„** - æ§åˆ¶å™¨ã€è§’è‰²ã€å·¥å…·å‡½æ•°åˆ†ç¦»ï¼Œæ˜“äºç»´æŠ¤
- ğŸ”„ **äº‹ä»¶é©±åŠ¨** - ä½¿ç”¨äº‹ä»¶æ€»çº¿è¿›è¡Œç»„ä»¶é—´é€šä¿¡
- ğŸ›¡ï¸ **é˜²å¾¡ç³»ç»Ÿ** - å¡”é˜²æ§åˆ¶å’Œå†›é˜Ÿç®¡ç†
- âš¡ **é«˜æ•ˆç‰©æµ** - æ™ºèƒ½çš„èµ„æºä¼ è¾“å’Œå­˜å‚¨ç®¡ç†ï¼ŒåŒ…å«Linkç½‘ç»œè‡ªåŠ¨åŒ–
- ğŸ”— **Linkç½‘ç»œç®¡ç†** - è‡ªåŠ¨åŒ–Linkèƒ½é‡ä¼ è¾“ï¼Œæ”¯æŒä¼˜å…ˆçº§åˆ†é…
- ğŸ› ï¸ **æ™ºèƒ½å­µåŒ–** - åŸºäºéœ€æ±‚çš„æ¡ä»¶åŒ–creepå­µåŒ–ï¼Œé¿å…èµ„æºæµªè´¹
- ğŸ“Š **TypeScript æ”¯æŒ** - å®Œæ•´çš„ç±»å‹å®šä¹‰ï¼Œå¼€å‘ä½“éªŒæ›´ä½³

## é¡¹ç›®ç»“æ„

```
src/
â”œâ”€â”€ main.ts              # ä¸»å¾ªç¯å…¥å£
â”œâ”€â”€ link/                # Link ç½‘ç»œç®¡ç†
â”‚   â””â”€â”€ LinkManager.ts   # æ™ºèƒ½Linkä¼ è¾“ç³»ç»Ÿ
â”œâ”€â”€ controller/          # æ§åˆ¶å™¨æ¨¡å—
â”‚   â””â”€â”€ controller.ts   # ä¸»è¦æ§åˆ¶é€»è¾‘
â”œâ”€â”€ role/                # è§’è‰²ç³»ç»Ÿ (åˆ†å±‚è®¾è®¡)
â”‚   â”œâ”€â”€ base/            # åŸºç¡€æ¡†æ¶
â”‚   â”‚   â”œâ”€â”€ creepWrapper.ts    # Creep åŒ…è£…å™¨
â”‚   â”‚   â”œâ”€â”€ baseRoles.ts       # åŸºç¡€è§’è‰²ç±»
â”‚   â”‚   â”œâ”€â”€ actionTypes.ts     # è¡Œä¸ºç±»å‹å®šä¹‰
â”‚   â”‚   â””â”€â”€ actionUtils.ts     # è¡Œä¸ºå·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ core/            # æ ¸å¿ƒç”Ÿäº§è§’è‰²
â”‚   â”‚   â”œâ”€â”€ EnergyRole.ts      # èƒ½é‡è§’è‰²åŸºç±»
â”‚   â”‚   â”œâ”€â”€ HarvestRole.ts     # é‡‡é›†è§’è‰²
â”‚   â”‚   â”œâ”€â”€ MinerRole.ts       # çŸ¿å·¥è§’è‰²
â”‚   â”‚   â”œâ”€â”€ BuilderRole.ts     # å»ºé€ è§’è‰²
â”‚   â”‚   â””â”€â”€ UpgradeRole.ts     # å‡çº§è§’è‰²
â”‚   â”œâ”€â”€ logistics/       # ç‰©æµè½¬è¿è§’è‰²
â”‚   â”‚   â”œâ”€â”€ BaseStorageTransferRole.ts  # å­˜å‚¨è½¬è¿åŸºç±»
â”‚   â”‚   â”œâ”€â”€ SpawnSupplierRole.ts        # å­µåŒ–ä¾›åº”è§’è‰²
â”‚   â”‚   â”œâ”€â”€ ContainerToStorageRole.ts   # å®¹å™¨åˆ°å­˜å‚¨
â”‚   â”‚   â”œâ”€â”€ StorageToContainerRole.ts   # å­˜å‚¨åˆ°å®¹å™¨
â”‚   â”‚   â”œâ”€â”€ StorageToTowerRole.ts       # å­˜å‚¨åˆ°é˜²å¾¡å¡”
â”‚   â”‚   â””â”€â”€ SweepToStorageRole.ts       # æ¸…æ‰«è½¬è¿
â”‚   â”œâ”€â”€ maintenance/     # ç»´æŠ¤ç®¡ç†è§’è‰²
â”‚   â”‚   â”œâ”€â”€ RepairerRole.ts           # ä¸“ä¸šä¿®ç†è§’è‰²
â”‚   â”‚   â”œâ”€â”€ CleanerRole.ts            # æ¸…ç†è§’è‰²
â”‚   â”‚   â”œâ”€â”€ RoadMaintenanceRole.ts    # é“è·¯ç»´æŠ¤
â”‚   â”‚   â””â”€â”€ WallMaintainerRole.ts     # åŸå¢™ç»´æŠ¤
â”‚   â”œâ”€â”€ military/        # å†›äº‹æˆ˜æ–—è§’è‰²
â”‚   â”‚   â”œâ”€â”€ AttackerRole.ts    # æ”»å‡»è§’è‰²
â”‚   â”‚   â”œâ”€â”€ DefenderRole.ts    # é˜²å¾¡è§’è‰²
â”‚   â”‚   â”œâ”€â”€ ScoutRole.ts       # ä¾¦å¯Ÿè§’è‰²
â”‚   â”‚   â”œâ”€â”€ GuardRole.ts       # å®ˆå«è§’è‰²
â”‚   â”‚   â””â”€â”€ HealerRole.ts      # æ²»ç–—è§’è‰²
â”‚   â”œâ”€â”€ expansion/       # æ‰©å¼ å¼€å‘è§’è‰²
â”‚   â”‚   â”œâ”€â”€ ClaimerRole.ts         # å é¢†è§’è‰²
â”‚   â”‚   â”œâ”€â”€ ReserverRole.ts        # é¢„è®¢è§’è‰²
â”‚   â”‚   â”œâ”€â”€ RemoteHarvesterRole.ts # è¿œç¨‹é‡‡é›†
â”‚   â”‚   â””â”€â”€ ColonizerRole.ts       # æ®–æ°‘è§’è‰²
â”‚   â”œâ”€â”€ specialist/      # ä¸“ä¸šç‰¹åŒ–è§’è‰²
â”‚   â”‚   â”œâ”€â”€ PowerBankAttackerRole.ts  # PowerBankæ”»å‡»
â”‚   â”‚   â”œâ”€â”€ PowerHaulerRole.ts        # Powerè¿è¾“
â”‚   â”‚   â”œâ”€â”€ DepositMinerRole.ts       # DepositæŒ–æ˜
â”‚   â”‚   â”œâ”€â”€ AlchemistRole.ts          # å®éªŒå®¤æ“ä½œ
â”‚   â”‚   â””â”€â”€ TerminalOperatorRole.ts   # ç»ˆç«¯è´¸æ˜“
â”‚   â”œâ”€â”€ emergency/       # åº”æ€¥è§’è‰²
â”‚   â”‚   â”œâ”€â”€ EmergencyRepairerRole.ts  # ç´§æ€¥ç»´ä¿®
â”‚   â”‚   â”œâ”€â”€ EvacuatorRole.ts          # æ’¤ç¦»è§’è‰²
â”‚   â”‚   â””â”€â”€ DisasterResponseRole.ts   # ç¾éš¾å“åº”
â”‚   â””â”€â”€ utils/           # è§’è‰²å·¥å…·å‡½æ•°
â”‚       â””â”€â”€ findUtils.ts       # æŸ¥æ‰¾å·¥å…·
â”œâ”€â”€ army.ts              # å†›é˜Ÿå’Œé˜²å¾¡ç³»ç»Ÿ
â”œâ”€â”€ utils.ts             # é€šç”¨å·¥å…·å‡½æ•°
â”œâ”€â”€ types.ts             # ç±»å‹å®šä¹‰
â””â”€â”€ constants.ts         # å¸¸é‡é…ç½®
```

## å®‰è£…å’Œé…ç½®

### 1. å…‹éš†é¡¹ç›®

```bash
git clone https://github.com/PengleiYu/screeps-ai.git
cd screeps-ai
```

### 2. å®‰è£…ä¾èµ–

```bash
npm install
```

### 3. é…ç½® Screeps è¿æ¥

åœ¨é¡¹ç›®çˆ¶ç›®å½•ä¸­é…ç½® `.screeps.json` æ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š

```json
{
  "token": "<ç”³è¯·çš„token>",
  "branch": "<åˆ†æ”¯å>",
  "ptr": false
}
```

> **è·å– Token**: åœ¨ Screeps æ¸¸æˆä¸­è®¿é—® [Account/Auth Tokens](https://screeps.com/a/#!/account/auth-tokens) é¡µé¢ç”³è¯· API token

## ä½¿ç”¨æ–¹æ³•

### æ„å»ºå’Œéƒ¨ç½²

æ‰§è¡Œä»¥ä¸‹å‘½ä»¤æ„å»ºå¹¶æ¨é€ä»£ç åˆ° Screeps æœåŠ¡å™¨ï¼š

```bash
npm run build
```

### æŒ‡å®šåˆ†æ”¯éƒ¨ç½²

æ¨é€åˆ°ç‰¹å®šåˆ†æ”¯ï¼š

```bash
npm run build -- --branch=default
```

### å¼€å‘æ¨¡å¼

å¯åŠ¨æ–‡ä»¶ç›‘å¬ï¼Œä»£ç å˜æ›´æ—¶è‡ªåŠ¨é‡æ–°æ„å»ºï¼š

```bash
npm run dev
```

### æ¸¸æˆå†…è°ƒè¯•

ç³»ç»Ÿæä¾›äº†ä¸°å¯Œçš„è°ƒè¯•å·¥å…·ï¼Œå¯åœ¨æ¸¸æˆæ§åˆ¶å°ä¸­ä½¿ç”¨ï¼š

```javascript
// Linkç½‘ç»œè°ƒè¯•
global.LinkManager.printLinksInfo('W1N1')        // æŸ¥çœ‹æŒ‡å®šæˆ¿é—´Linkä¿¡æ¯
global.LinkManager.printAllRoomsLinks()          // æŸ¥çœ‹æ‰€æœ‰æˆ¿é—´Linkä¿¡æ¯
global.LinkManager.manageLinkNetwork('W1N1')     // æ‰‹åŠ¨è¿è¡ŒLinkç®¡ç†
global.LinkManager.clearCache()                  // æ¸…ç©ºLinkç¼“å­˜
```

## æ ¸å¿ƒåŠŸèƒ½

### è§’è‰²ç®¡ç†
- **HarvestRole**: è‡ªåŠ¨é‡‡é›†èƒ½é‡å’ŒçŸ¿ç‰©
- **BuilderRole**: å»ºé€ å’Œç»´ä¿®å»ºç­‘
- **UpgradeRole**: å‡çº§æˆ¿é—´æ§åˆ¶å™¨
- **MinerRole**: ä¸“ä¸šæŒ–çŸ¿ä½œä¸š
- **RepairerRole**: ä¸“ä¸šå»ºç­‘ç»´ä¿®è§’è‰²

### ç‰©æµç³»ç»Ÿ
- **ContainerToStorageRole**: å®¹å™¨åˆ°å­˜å‚¨çš„è¿è¾“
- **StorageToContainerRole**: å­˜å‚¨åˆ°æ§åˆ¶å™¨å®¹å™¨è¿è¾“
- **StorageToTowerRole**: ä¸ºé˜²å¾¡å¡”è¡¥å……èƒ½é‡
- **SweepToStorageRole**: æ¸…ç†åœ°é¢èµ„æº

### Linkç½‘ç»œç³»ç»Ÿ
- **LinkManager**: æ™ºèƒ½Linkç½‘ç»œç®¡ç†
- **è‡ªåŠ¨åˆ†ç±»**: æºLinkã€æ§åˆ¶å™¨Linkã€å­˜å‚¨Linkæ™ºèƒ½è¯†åˆ«
- **ä¼˜å…ˆçº§ä¼ è¾“**: æ§åˆ¶å™¨ä¼˜å…ˆï¼Œå­˜å‚¨å…¶æ¬¡çš„èƒ½é‡åˆ†é…
- **å¤šæˆ¿é—´æ”¯æŒ**: è‡ªåŠ¨ç®¡ç†æ‰€æœ‰å·±æ–¹æˆ¿é—´çš„Linkç½‘ç»œ
- **æ€§èƒ½ä¼˜åŒ–**: 10tickç¼“å­˜æœºåˆ¶ï¼Œæå‡CPUæ•ˆç‡

### é˜²å¾¡ç³»ç»Ÿ
- **TowerController**: è‡ªåŠ¨é˜²å¾¡å¡”æ§åˆ¶
- **æ™ºèƒ½ç»´ä¿®**: å¡”é˜²å’Œcreepç»´ä¿®çš„åè°ƒç®¡ç†

### æ™ºèƒ½å­µåŒ–ç³»ç»Ÿ
- **æ¡ä»¶åŒ–å­µåŒ–**: åŸºäºå®é™…éœ€æ±‚åˆ¤æ–­æ˜¯å¦å­µåŒ–creep
- **èµ„æºä¼˜åŒ–**: é¿å…æ— æ„ä¹‰çš„creepå­µåŒ–ï¼ŒèŠ‚çº¦èƒ½é‡
- **åŠ¨æ€è°ƒæ•´**: æ ¹æ®æˆ¿é—´çŠ¶æ€è‡ªåŠ¨è°ƒæ•´è§’è‰²æ•°é‡
- **å¤šSpawnæ”¯æŒ**: æ™ºèƒ½é€‰æ‹©å¯ç”¨çš„Spawnè¿›è¡Œå­µåŒ–

### äº‹ä»¶ç³»ç»Ÿ
- åŸºäºäº‹ä»¶æ€»çº¿çš„æ¨¡å—é—´é€šä¿¡
- æ”¯æŒå¾ªç¯ç»“æŸäº‹ä»¶å¤„ç†

## å¼€å‘æŒ‡å—

1. **æ·»åŠ æ–°è§’è‰²**: åœ¨ `src/role/` ç›®å½•ä¸‹åˆ›å»ºæ–°çš„è§’è‰²ç±»
2. **ä¿®æ”¹æ§åˆ¶é€»è¾‘**: ç¼–è¾‘ `src/controller/controller.ts`
3. **è°ƒæ•´å¸¸é‡**: ä¿®æ”¹ `src/constants.ts` ä¸­çš„é…ç½®
4. **æ·»åŠ å·¥å…·å‡½æ•°**: åœ¨ `src/utils.ts` ä¸­æ·»åŠ é€šç”¨åŠŸèƒ½
5. **Linkç½‘ç»œè°ƒè¯•**: ä½¿ç”¨å…¨å±€è°ƒè¯•å·¥å…·ç›‘æ§å’Œç®¡ç†Linkä¼ è¾“
6. **å­µåŒ–æ¡ä»¶ä¼˜åŒ–**: åœ¨ `shouldSpawn()` å‡½æ•°ä¸­æ·»åŠ è§’è‰²ç‰¹å®šçš„å­µåŒ–æ¡ä»¶

## æ„å»ºå·¥å…·

é¡¹ç›®ä½¿ç”¨ [Grunt](https://gruntjs.com/) ä½œä¸ºæ„å»ºå·¥å…·ï¼Œé…åˆ [grunt-screeps](https://github.com/screeps/grunt-screeps) æ’ä»¶å®ç°ä»£ç æ¨é€ã€‚

## é¡¹ç›®ç®¡ç†

ğŸ“‹ **GitHub Projects**: [ScreepsProject](https://github.com/users/PengleiYu/projects/2) - æŸ¥çœ‹å¼€å‘è¿›åº¦å’Œä»»åŠ¡è§„åˆ’

## è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Request æ¥æ”¹è¿›è¿™ä¸ªé¡¹ç›®ï¼

## è®¸å¯è¯

ISC License